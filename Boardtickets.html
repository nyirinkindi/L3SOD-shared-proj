<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>On The Go - Rwanda Bus Tickets</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom Style for Font and Overrides -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        :root {
            --primary-color: #1e3a8a; /* Deep Blue 800 for Professionalism */
            --secondary-color: #1E293B; /* Slate 800 (Good for text) */
            --accent-color: #06B6D4; /* Cyan 500 for a fresh, professional accent */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F1F5F9; /* Light Slate Background */
        }
        /* Custom styling for large, spacious main content */
        .main-card-container {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            /* Fluid width: 95% on all screens, max-width capped for very large monitors */
            max-width: 95%; 
            width: 1400px; 
        }
        /* Custom select and input styling for high-fidelity look */
        .custom-input {
            appearance: none;
            /* Changed fill color to match the new dark blue theme */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23DBEAFE'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd' /%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.5em;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">

    <!-- Header/Navigation Bar -->
    <header class="w-full bg-white shadow-md mb-8 sm:mb-12">
        <div class="main-card-container mx-auto flex flex-col sm:flex-row justify-between items-center py-4 sm:py-6 px-4 sm:px-10">
            <!-- Logo/Brand -->
            <div class="flex items-center space-x-2 sm:space-x-4 mb-4 sm:mb-0">
                <!-- Simple SVG Logo for "On The Go" -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 sm:h-10 sm:w-10 text-blue-800" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                </svg>
                <span class="text-xl sm:text-2xl lg:text-3xl font-extrabold text-gray-800">On The Go</span>
            </div>

            <!-- Navigation Links -->
            <nav class="flex space-x-4 sm:space-x-8 text-sm sm:text-base lg:text-lg font-medium text-gray-600">
                <a href="#" class="hover:text-blue-800 transition duration-150">Home</a>
                <a href="#" class="hover:text-blue-800 transition duration-150">About Us</a>
                <a href="#" class="hover:text-blue-800 transition duration-150">Services</a>
                <a href="#" class="hover:text-blue-800 transition duration-150">Contacts</a>
            </nav>

            <!-- Sign Up Button -->
            <button class="hidden lg:block px-5 py-2 bg-blue-800 text-white font-semibold rounded-xl hover:bg-blue-900 transition duration-150 shadow-lg">
                Sign Up
            </button>
        </div>
    </header>

    <!-- Main Ticketing Interface (Strictly following the wireframe structure) -->
    <main class="flex-grow flex justify-center w-full pb-10 sm:pb-20 px-4 sm:px-6 lg:px-8">
        <div class="main-card-container bg-white rounded-2xl sm:rounded-3xl p-6 lg:p-12 grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-10">
            
            <!-- LEFT COLUMN: Ticketing Form -->
            <div id="ticketing-form-container" class="bg-blue-900 p-6 sm:p-10 lg:p-16 rounded-2xl sm:rounded-3xl min-h-[450px] lg:min-h-[600px] flex flex-col justify-start space-y-6 sm:space-y-8">
                <!-- Form Content will be rendered here -->
                <form id="ticket-form" class="space-y-6 sm:space-y-8">
                    <!-- Express Company -->
                    <div class="space-y-2">
                        <label for="express" class="block text-base font-semibold text-blue-200">Express</label>
                        <div class="relative">
                            <select id="express" name="express" class="custom-input w-full p-4 text-base rounded-xl bg-blue-800 text-blue-100 border-4 border-blue-700 focus:ring-2 focus:ring-white focus:border-white transition-all duration-300 shadow-xl">
                                <option value="Horizon Express LTD">Horizon Express LTD</option>
                                <option value="Volcano Express">Volcano Express</option>
                                <option value="Jali Transport">Jali Transport</option>
                                <option value="Omega Express">Omega Express</option>
                            </select>
                            <!-- Removed left icon -->
                        </div>
                    </div>

                    <!-- Departure & Destination -->
                    <div class="flex flex-col sm:flex-row space-y-6 sm:space-y-0 sm:space-x-8">
                        <!-- Departure -->
                        <div class="w-full sm:w-1/2 space-y-2">
                            <label for="departure" class="block text-base font-semibold text-blue-200">Departure</label>
                            <div class="relative">
                                <select id="departure" name="departure" class="custom-input w-full p-4 text-base rounded-xl bg-blue-800 text-blue-100 border-4 border-blue-700 focus:ring-2 focus:ring-white focus:border-white transition-all duration-300 shadow-xl">
                                    <option value="Nyabugogo">Nyabugogo</option>
                                    <option value="Kimironko">Kimironko</option>
                                    <option value="Gisenyi">Gisenyi</option>
                                </select>
                                <!-- Removed left icon -->
                            </div>
                        </div>

                        <!-- Destination -->
                        <div class="w-full sm:w-1/2 space-y-2">
                            <label for="destination" class="block text-base font-semibold text-blue-200">Destination</label>
                            <div class="relative">
                                <select id="destination" name="destination" class="custom-input w-full p-4 text-base rounded-xl bg-blue-800 text-blue-100 border-4 border-blue-700 focus:ring-2 focus:ring-white focus:border-white transition-all duration-300 shadow-xl">
                                    <option value="Nyanza">Nyanza</option>
                                    <option value="Musanze">Musanze</option>
                                    <option value="Huye">Huye</option>
                                </select>
                                <!-- Removed left icon -->
                            </div>
                        </div>
                    </div>

                    <!-- Date & Time -->
                    <div class="flex flex-col sm:flex-row space-y-6 sm:space-y-0 sm:space-x-8">
                        <!-- Date -->
                        <div class="w-full sm:w-1/2 space-y-2">
                            <label for="travel-date" class="block text-base font-semibold text-blue-200">Date</label>
                            <div class="relative">
                                <!-- Adjusted padding to prevent text overlap with the icon (pl-12) -->
                                <input type="date" id="travel-date" name="travel-date" value="2024-11-21" class="w-full py-4 pr-4 pl-12 text-base rounded-xl bg-blue-800 text-blue-100 border-4 border-blue-700 focus:ring-2 focus:ring-white focus:border-white transition-all duration-300 shadow-xl">
                                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-100" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                </div>
                            </div>
                        </div>

                        <!-- Time -->
                        <div class="w-full sm:w-1/2 space-y-2"> <!-- Removed pt-8 sm:pt-0 to fix mobile vertical spacing -->
                            <label for="travel-time" class="block text-base font-semibold text-blue-200">Time</label>
                            <div class="relative">
                                <!-- Adjusted padding to prevent text overlap with the icon (pl-12) -->
                                <input type="time" id="travel-time" name="travel-time" value="09:00" class="w-full py-4 pr-4 pl-12 text-base rounded-xl bg-blue-800 text-blue-100 border-4 border-blue-700 focus:ring-2 focus:ring-white focus:border-white transition-all duration-300 shadow-xl">
                                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-100" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- BOARD Button -->
                    <button type="submit" class="w-full mt-8 p-4 text-2xl font-black rounded-2xl bg-white text-blue-900 hover:bg-gray-100 transition-all duration-300 shadow-2xl hover:shadow-lg transform hover:scale-[1.01] lg:p-6 lg:text-3xl">
                        BOARD
                    </button>
                </form>
            </div>

            <!-- RIGHT COLUMN: Summary / Payment / Receipt -->
            <div id="right-panel" class="bg-gray-50 p-6 sm:p-10 lg:p-16 rounded-2xl sm:rounded-3xl min-h-[450px] lg:min-h-[600px] flex flex-col justify-between space-y-8 shadow-inner">
                <!-- Content will be swapped here based on stage -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="w-full bg-slate-800 text-white mt-auto">
        <div class="main-card-container mx-auto py-6 sm:py-8 px-4 sm:px-10 flex flex-col sm:flex-row justify-between items-center text-xs sm:text-sm">
            <p class="mb-2 sm:mb-0">&copy; 2024 On The Go. Developed by <span class="text-blue-400 font-semibold">Docks cooperation</span>.</p>
            <div class="flex flex-col sm:flex-row space-y-1 sm:space-y-0 sm:space-x-6 text-center sm:text-left">
                <a href="mailto:cyusaclever@gmail.com" class="hover:text-blue-400 transition">Email: cyusaclever@gmail.com</a>
                <a href="tel:+250798971658" class="hover:text-blue-400 transition">Contact: 0798971658</a>
            </div>
        </div>
    </footer>

    <script>
        // Global state management for the ticketing process
        let state = {
            currentStage: 'summary', // 'summary', 'payment', 'receipt'
            ticketDetails: {
                express: 'Horizon Express LTD',
                departure: 'Nyabugogo',
                destination: 'Nyanza',
                date: new Date().toISOString().substring(0, 10),
                time: '09:00 AM',
                price: '2,500 Rwf',
                pnr: 'OTG' + Math.floor(Math.random() * 900000 + 100000)
            }
        };

        const form = document.getElementById('ticket-form');
        const rightPanel = document.getElementById('right-panel');

        // Utility function for setting content
        const setPanelContent = (content) => {
            rightPanel.innerHTML = content;
        };

        // --- View Rendering Functions ---

        /**
         * Renders the Travel Plans Summary view.
         */
        const renderSummary = () => {
            const { express, departure, destination, date, time, price } = state.ticketDetails;

            const content = `
                <div class="flex flex-col justify-between h-full">
                    <div>
                        <h2 class="text-3xl font-extrabold text-slate-800 mb-6 sm:mb-10">Travel Plans</h2>

                        <div class="space-y-4 sm:space-y-6 text-base sm:text-xl">
                            <!-- Express -->
                            <div class="border-b pb-2">
                                <span class="font-semibold text-gray-500 block text-sm sm:text-base">Express</span>
                                <span class="font-bold text-slate-700">${express}</span>
                            </div>

                            <!-- Station/Departure -->
                            <div class="border-b pb-2">
                                <span class="font-semibold text-gray-500 block text-sm sm:text-base">Station / Departure</span>
                                <span class="font-bold text-slate-700">${departure}</span>
                            </div>

                            <!-- Destination -->
                            <div class="border-b pb-2">
                                <span class="font-semibold text-gray-500 block text-sm sm:text-base">Destination</span>
                                <span class="font-bold text-slate-700">${destination}</span>
                            </div>

                            <!-- Date & Time -->
                            <div class="border-b pb-2">
                                <span class="font-semibold text-gray-500 block text-sm sm:text-base">Travel Date & Time</span>
                                <span class="font-bold text-slate-700">${new Date(date).toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' })} @ ${time}</span>
                            </div>

                        </div>
                    </div>

                    <!-- Price and Pay Now Button (Strictly following wireframe layout) -->
                    <div class="mt-12 sm:mt-16 pt-6 sm:pt-10 border-t-4 border-dashed border-gray-300">
                        <span class="text-xl font-extrabold text-red-600 block mb-1 sm:mb-2">PRICE</span>
                        <!-- Increased margin-bottom (mb-16 on sm/desktop) on price span for separation from the button -->
                        <span class="text-4xl sm:text-5xl font-black text-slate-800 mb-10 sm:mb-16">${price}</span>

                        <button id="pay-now-btn" class="w-full p-4 text-xl font-bold rounded-xl bg-blue-900 text-white hover:bg-blue-700 transition-all duration-300 shadow-xl hover:shadow-2xl sm:p-5 sm:text-2xl">
                            PAY NOW
                        </button>
                    </div>
                </div>
            `;
            setPanelContent(content);
            document.getElementById('pay-now-btn').addEventListener('click', () => {
                state.currentStage = 'payment';
                renderPayment();
            });
        };

        /**
         * Renders the Payment Method simulation view.
         */
        const renderPayment = () => {
            const { price } = state.ticketDetails;

            const content = `
                <div class="flex flex-col h-full space-y-6 sm:space-y-10">
                    <h2 class="text-3xl font-extrabold text-blue-800 mb-2 sm:mb-4">Select Payment Method</h2>

                    <div id="payment-options" class="space-y-4 sm:space-y-6 flex-grow">
                        <!-- Mobile Money Payment Option -->
                        <div id="momo-block" class="bg-white p-4 sm:p-6 rounded-xl border-4 border-blue-400 cursor-pointer shadow-lg transition-all duration-200">
                            <label class="flex items-center space-x-3 sm:space-x-4 text-lg sm:text-xl font-semibold text-slate-700">
                                <input type="radio" name="payment-method" value="Momo" checked id="radio-momo" class="form-radio h-5 w-5 sm:h-6 sm:w-6 text-blue-600 border-blue-400 ring-blue-600 focus:ring-blue-600">
                                <span>Mobile Money (MTN/Airtel)</span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 sm:h-8 sm:w-8 text-yellow-500 ml-auto" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm-7-8a7 7 0 1114 0 7 7 0 01-14 0zM8 8a1 1 0 011-1h2a1 1 0 110 2h-1v4a1 1 0 11-2 0V8z" clip-rule="evenodd" /></svg>
                            </label>
                            
                            <!-- Mobile Money Credentials Input (Initially Visible) -->
                            <div id="momo-input-container" class="mt-4 pt-4 border-t border-gray-200 space-y-3">
                                <input type="text" placeholder="Phone Number (e.g. 078XXXXXXX)" class="w-full p-3 text-base rounded-lg bg-gray-100 text-slate-700 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 transition-all" value="0781234567">
                                <p class="text-xs text-gray-500">You will be prompted to enter your PIN on your device.</p>
                            </div>
                        </div>

                        <!-- Card Payment Option -->
                        <div id="card-block" class="bg-white p-4 sm:p-6 rounded-xl border-2 border-gray-200 cursor-pointer hover:border-blue-400 shadow-md transition-all duration-200">
                            <label class="flex items-center space-x-3 sm:space-x-4 text-lg sm:text-xl font-semibold text-slate-700">
                                <input type="radio" name="payment-method" value="Card" id="radio-card" class="form-radio h-5 w-5 sm:h-6 sm:w-6 text-blue-600 border-gray-400">
                                <span>Visa / MasterCard</span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 sm:h-8 sm:w-8 text-blue-600 ml-auto" viewBox="0 0 20 20" fill="currentColor"><path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z" /><path fill-rule="evenodd" d="M2 9v10a2 2 0 002 2h12a2 2 0 002-2V9H2zm7 3a1 1 0 000 2h2a1 1 0 100-2H9z" clip-rule="evenodd" /></svg>
                            </label>

                            <!-- Card Credentials Input (Initially Hidden) -->
                            <div id="card-input-container" class="hidden mt-4 pt-4 border-t border-gray-200 space-y-3">
                                <!-- Card Number -->
                                <input type="text" placeholder="Card Number" class="w-full p-3 text-base rounded-lg bg-gray-100 text-slate-700 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 transition-all" value="4111 1111 1111 1111">
                                <div class="flex space-x-3">
                                    <!-- Expiry -->
                                    <input type="text" placeholder="MM/YY" class="w-1/2 p-3 text-base rounded-lg bg-gray-100 text-slate-700 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 transition-all" value="12/26">
                                    <!-- CVV -->
                                    <input type="text" placeholder="CVV" class="w-1/2 p-3 text-base rounded-lg bg-gray-100 text-slate-700 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 transition-all" value="123">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Summary and Button -->
                    <div class="mt-auto pt-4 sm:pt-8 border-t-4 border-dashed border-blue-300">
                        <div class="flex justify-between items-center mb-3 text-xl sm:text-2xl font-bold">
                            <span>Total Payable:</span>
                            <span class="text-blue-800">${price}</span>
                        </div>
                        <button id="confirm-payment-btn" class="w-full p-4 text-xl font-bold rounded-xl bg-blue-800 text-white hover:bg-slate-800 transition-all duration-300 shadow-xl hover:shadow-2xl sm:p-5 sm:text-2xl">
                            CONFIRM & PAY
                        </button>
                    </div>
                </div>
            `;
            setPanelContent(content);

            const momoBlock = document.getElementById('momo-block');
            const cardBlock = document.getElementById('card-block');
            const momoInputContainer = document.getElementById('momo-input-container');
            const cardInputContainer = document.getElementById('card-input-container');
            const radioMomo = document.getElementById('radio-momo');
            const radioCard = document.getElementById('radio-card');
            
            // Function to handle switching visual state
            const updatePaymentUI = (method) => {
                if (method === 'Momo') {
                    momoInputContainer.classList.remove('hidden');
                    cardInputContainer.classList.add('hidden');
                    momoBlock.classList.add('border-blue-400');
                    momoBlock.classList.remove('border-gray-200', 'border-2');
                    momoBlock.classList.add('border-4');
                    cardBlock.classList.remove('border-blue-400', 'border-4');
                    cardBlock.classList.add('border-gray-200', 'border-2');
                } else {
                    momoInputContainer.classList.add('hidden');
                    cardInputContainer.classList.remove('hidden');
                    cardBlock.classList.add('border-blue-400');
                    cardBlock.classList.remove('border-gray-200', 'border-2');
                    cardBlock.classList.add('border-4');
                    momoBlock.classList.remove('border-blue-400', 'border-4');
                    momoBlock.classList.add('border-gray-200', 'border-2');
                }
            }

            // Listeners to toggle visibility and selection
            radioMomo.addEventListener('change', () => updatePaymentUI('Momo'));
            radioCard.addEventListener('change', () => updatePaymentUI('Card'));

            // Allow clicking the entire block to select the radio button
            momoBlock.addEventListener('click', () => { radioMomo.checked = true; updatePaymentUI('Momo'); });
            cardBlock.addEventListener('click', () => { radioCard.checked = true; updatePaymentUI('Card'); });

            // Ensure the initial state is correct (Momo is checked by default)
            updatePaymentUI('Momo');


            document.getElementById('confirm-payment-btn').addEventListener('click', () => {
                // Simulate processing time
                document.getElementById('confirm-payment-btn').textContent = 'Processing...';
                document.getElementById('confirm-payment-btn').disabled = true;

                setTimeout(() => {
                    state.currentStage = 'receipt';
                    renderReceipt();
                }, 1500); // 1.5 second delay for fake processing
            });
        };

        /**
         * Renders the fake Receipt view.
         */
        const renderReceipt = () => {
            const { express, departure, destination, date, time, price, pnr } = state.ticketDetails;

            const content = `
                <div class="flex flex-col h-full space-y-6 sm:space-y-8 bg-white p-6 sm:p-8 rounded-2xl sm:rounded-3xl border-4 border-cyan-500 shadow-2xl">
                    <div class="text-center">
                        <h2 class="text-3xl font-extrabold text-cyan-600 mb-1 sm:mb-2">Payment Successful!</h2>
                        <p class="text-gray-600 text-sm sm:text-lg">Your transaction is complete and your ticket is confirmed.</p>
                    </div>

                    <!-- Receipt Details Card -->
                    <div class="bg-gray-50 p-4 sm:p-6 rounded-xl border border-gray-200 flex-grow space-y-3 sm:space-y-4">
                        <h3 class="text-xl sm:text-2xl font-bold text-slate-800 border-b pb-2 mb-3">Travel Receipt</h3>

                        <!-- PNR / Reference -->
                        <div class="flex justify-between text-base sm:text-xl">
                            <span class="font-semibold text-gray-500">Reference (PNR)</span>
                            <span class="font-black text-blue-800 text-xl sm:text-2xl">${pnr}</span>
                        </div>
                        
                        <!-- Transaction Amount -->
                        <div class="flex justify-between text-base sm:text-xl">
                            <span class="font-semibold text-gray-500">Amount Paid</span>
                            <span class="font-black text-green-600 text-xl sm:text-2xl">${price}</span>
                        </div>

                        <div class="border-t pt-3 sm:pt-4 space-y-2 sm:space-y-3">
                            <!-- Route -->
                            <div class="flex justify-between text-sm sm:text-lg">
                                <span class="text-gray-500">Route</span>
                                <span class="font-semibold text-slate-700">${departure} <span class="text-blue-800 mx-1">&rarr;</span> ${destination}</span>
                            </div>
                            <!-- Operator -->
                            <div class="flex justify-between text-sm sm:text-lg">
                                <span class="text-gray-500">Operator</span>
                                <span class="font-semibold text-slate-700">${express}</span>
                            </div>
                            <!-- Date & Time -->
                            <div class="flex justify-between text-sm sm:text-lg">
                                <span class="text-gray-500">Date/Time</span>
                                <span class="font-semibold text-slate-700">${new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} at ${time}</span>
                            </div>
                        </div>

                    </div>
                    
                    <button onclick="window.location.reload();" class="w-full p-4 text-xl font-bold rounded-xl bg-blue-800 text-white hover:bg-slate-800 transition-all duration-300 shadow-xl hover:shadow-2xl sm:p-5 sm:text-2xl">
                        BOOK ANOTHER TICKET
                    </button>
                </div>
            `;
            setPanelContent(content);
        };

        // --- Event Listeners and Initial Load ---

        /**
         * Updates the state with form data and renders the Summary view.
         */
        const handleBoard = (e) => {
            e.preventDefault();
            
            const expressEl = document.getElementById('express');
            const departureEl = document.getElementById('departure');
            const destinationEl = document.getElementById('destination');
            const dateEl = document.getElementById('travel-date');
            const timeEl = document.getElementById('travel-time');

            // Simple validation
            if (!expressEl.value || !departureEl.value || !destinationEl.value || !dateEl.value || !timeEl.value) {
                // In a real app, show a nice error message. Here, we'll just log.
                console.error("Please fill all fields.");
                return;
            }

            state.ticketDetails = {
                express: expressEl.value,
                departure: departureEl.value,
                destination: destinationEl.value,
                date: dateEl.value,
                time: formatTime(timeEl.value),
                price: '2,500 Rwf', // Static price for simplicity
                pnr: 'OTG' + Math.floor(Math.random() * 900000 + 100000)
            };

            state.currentStage = 'summary';
            renderSummary();
        };

        // Helper to format 24h time (HH:MM) to 12h time (HH:MM AM/PM)
        const formatTime = (time24) => {
            const [hours, minutes] = time24.split(':');
            const date = new Date();
            date.setHours(parseInt(hours));
            date.setMinutes(parseInt(minutes));
            return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true });
        }


        // Set default date to today and time to 9:00 for the form
        document.addEventListener('DOMContentLoaded', () => {
            const today = new Date().toISOString().substring(0, 10);
            document.getElementById('travel-date').value = today;
            document.getElementById('travel-time').value = '09:00';

            // Attach event listener to the form's submit (BOARD)
            form.addEventListener('submit', handleBoard);
            
            // Initial render of the Summary panel
            renderSummary();
        });
    </script>

</body>
</html>